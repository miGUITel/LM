### Sesión 2 — Selección y modificación de elementos del DOM

**Objetivo conceptual:** localizar elementos y cambiar su contenido o atributos.

---

## 1) Recordatorio imprescindible: DOM y selección

En la sesión anterior vimos que JavaScript **no trabaja directamente sobre el HTML**, sino sobre el **DOM**, la representación del documento que el navegador mantiene en memoria.

La idea central sigue siendo la misma, y conviene repetirla explícitamente al inicio de la sesión:

> JavaScript solo puede modificar aquello que es capaz de localizar en el DOM.

Por tanto, **seleccionar bien los elementos** es el paso previo obligatorio antes de cualquier cambio.

---

## 2) Seleccionar uno o varios elementos

### `querySelector()`

* Selecciona **un único elemento**.
* Utiliza **selectores CSS**.
* Si hay varios que coinciden, devuelve **solo el primero**.

```js
const refran = document.querySelector("#refran");
const boton = document.querySelector(".btn");
```

Didácticamente es muy potente porque:

* El alumnado ya conoce los selectores por CSS.
* Unifica la forma de seleccionar por etiqueta, clase o id.

---

### `querySelectorAll()`

* Selecciona **varios elementos**.
* Devuelve una **NodeList**.

```js
const botones = document.querySelectorAll("button");
```

Aquí es importante insistir en una idea básica:

> `querySelectorAll()` **no devuelve un solo elemento**, sino una colección.

---

## 3) ¿Qué es una NodeList? (sin profundizar)

Una **NodeList** es una lista de nodos del DOM.

Para este nivel basta con que entiendan que:

* Se parece a un array.
* Tiene posiciones (`[0]`, `[1]`, …).
* Se puede recorrer con `forEach`.

```js
botones.forEach(boton => {
  boton.textContent = "Botón modificado";
});
```

Error típico que conviene anticipar:

* Intentar hacer `botones.textContent = ...`
  → no funciona porque **la NodeList no es un elemento**.

---

## 4) Modificar el contenido de los elementos

Una vez seleccionado un elemento, podemos **cambiar lo que muestra**.

### `textContent`

* Cambia **solo el texto**.
* No interpreta HTML.
* Es la opción **más segura**.

```js
refran.textContent = "A quien madruga, Dios le ayuda";
```

Es ideal para:

* Frases
* Mensajes
* Avisos
* Resultados numéricos

---

### `innerHTML` (uso controlado)

* Permite introducir **HTML dentro del elemento**.
* El navegador interpreta las etiquetas.

```js
refran.innerHTML = "<strong>Más vale tarde</strong> que nunca";
```

Conviene dejar claro:

* Es útil cuando queremos **estructura interna**.
* No debe usarse de forma indiscriminada.
* En niveles posteriores se hablará de seguridad; aquí basta con el criterio: *úsalo solo cuando necesites HTML*.

---

## 5) Modificar atributos de los elementos

Además del contenido, los elementos tienen **atributos** que también pueden cambiarse dinámicamente.

### `setAttribute()`

Permite cambiar cualquier atributo:

```js
imagen.setAttribute("src", "img/refran2.jpg");
enlace.setAttribute("href", "https://ejemplo.com");
```

Atributos típicos que se entienden muy bien con ejemplos reales:

* `src` → cambiar una imagen
* `href` → cambiar un enlace
* `alt` → texto alternativo de una imagen
* `value` → contenido de un input

Esto conecta muy bien con la idea de “web viva”:

* la imagen cambia,
* el enlace apunta a otro sitio,
* el texto mostrado se actualiza,
  todo **sin recargar la página**.

---

## 6) Conexión con la realidad

En este punto conviene cerrar el bloque teórico reforzando la utilidad práctica:

* Un botón que cambia un mensaje motivador.
* Un visor de citas o refranes.
* Un carrusel de imágenes sencillo.
* Un aviso que se actualiza según una acción.

Todo responde al mismo patrón:

1. Seleccionar.
2. Modificar contenido o atributos.
3. El DOM cambia → la página responde.

---

# Demostración final: visor de refranes dinámico

Una web muy sencilla pero muy efectiva didácticamente:
al pulsar un botón, **cambia el refrán que se muestra**.

---

## `index.html` [visitar](./index.html)

```html
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Refranes dinámicos</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container">
    <h1>Refranero popular</h1>

    <section class="panel">
      <p id="refran" class="refran">
        A quien madruga, Dios le ayuda.
      </p>

      <p id="contador" class="contador">
        Refrán 1
      </p>

      <button id="btnCambiar">Cambiar refrán</button>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
```

---

## `style.css`

```css
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 30px;
}

.container {
  max-width: 700px;
  margin: 0 auto;
}

.panel {
  background: white;
  padding: 24px;
  border-radius: 8px;
  border: 1px solid #ddd;
}

.refran {
  font-size: 1.4em;
  margin-bottom: 16px;
}

.contador {
  color: #555;
  margin-bottom: 20px;
}

button {
  padding: 10px 16px;
  font-size: 1em;
  border-radius: 6px;
  border: 1px solid #bbb;
  cursor: pointer;
}

button:hover {
  background: #f0f0f0;
}
```

---

## `app.js`

```js
// Selección de elementos
const refranElemento = document.querySelector("#refran");
const contadorElemento = document.querySelector("#contador");
const boton = document.querySelector("#btnCambiar");

// Lista de refranes
const refranes = [
  "A quien madruga, Dios le ayuda.",
  "Más vale tarde que nunca.",
  "No por mucho madrugar amanece más temprano.",
  "En casa de herrero, cuchillo de palo.",
  "Camarón que se duerme se lo lleva la corriente."
];

let indice = 0;

boton.addEventListener("click", () => {
  // Calculamos el siguiente refrán
  indice++;
  if (indice >= refranes.length) {
    indice = 0;
  }

  // Modificamos el contenido del DOM
  refranElemento.textContent = refranes[indice];
  contadorElemento.textContent = `Refrán ${indice + 1}`;
});
```

---

## Cómo explotar la demo en clase

1. Mostrar el HTML: “solo hay un refrán fijo”.
2. Mostrar el JS:

   * selección con `querySelector`
   * cambio con `textContent`
3. Pulsar el botón varias veces.
4. Pregunta clave al grupo:

   * *¿Dónde está el bucle de refranes?*
   * *¿Qué elemento se modifica realmente?*
5. Cerrar reforzando la idea de sesión:

> Localizar bien un elemento es lo que permite cambiar textos, imágenes o enlaces sin recargar la página.

